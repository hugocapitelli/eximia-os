# Harven.AI Backend - Configuracao de Ambiente
# Copie este arquivo para .env e preencha com seus valores

# ============================================
# SUPABASE (Banco de Dados) - OBRIGATORIO
# ============================================
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_KEY=sua-chave-anon-ou-service-role

# ============================================
# OPENAI (Agentes de IA) - OBRIGATORIO PARA IA
# ============================================
# Obtenha sua chave em: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-sua-chave-openai

# Modelo a usar (opcoes: gpt-4o-mini, gpt-4o, gpt-4-turbo, gpt-3.5-turbo)
# gpt-4o-mini e o mais barato e recomendado para comecar
OPENAI_MODEL=gpt-4o-mini

# ============================================
# AUTENTICACAO (Opcional)
# ============================================
JWT_SECRET=super-secret-jwt-key

# ============================================
# PRODUCAO (Deploy)
# ============================================
# Defina como 'production' em deploy
ENVIRONMENT=development

# URL do frontend (para CORS em producao)
FRONTEND_URL=http://localhost:3000

# Porta do servidor (default: 8000)
PORT=8000

# ============================================
# JACAD - Sistema Academico (Integracao)
# ============================================
# URL da API do JACAD para importacao de alunos e disciplinas
# JACAD_URL=https://jacad.escola.com.br/api
# JACAD_API_KEY=sua-chave-api-jacad

# ============================================
# MOODLE LMS (Integracao Bidirecional)
# ============================================
# Exportacao de portfolio e recepcao de avaliacoes
# MOODLE_URL=https://moodle.escola.com.br
# MOODLE_TOKEN=seu-token-moodle-aqui
# MOODLE_WEBHOOK_SECRET=secret-para-validar-webhooks

# ============================================
# EMAIL (Notificacoes Opcionais)
# ============================================
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=seu-email@gmail.com
# SMTP_PASSWORD=sua-senha-de-app

# ============================================
# MONITORAMENTO E OBSERVABILIDADE
# ============================================
# Sentry - Error Tracking & Performance
SENTRY_DSN=https://seu-projeto.sentry.io
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=INFO

# ============================================
# CACHE (Redis)
# ============================================
REDIS_URL=redis://localhost:6379
CACHE_PREFIX=harven:
CACHE_DEFAULT_TTL=300

# ============================================
# DATABASE CONNECTION POOL
# ============================================
DB_POOL_SIZE=5
SUPABASE_SERVICE_KEY=sua-service-role-key

# ============================================
# RATE LIMITING
# ============================================
# Format: "requests/period" (e.g., "100/minute", "10/second")
RATE_LIMIT_AUTH=5/minute
RATE_LIMIT_AI=10/minute
RATE_LIMIT_API=100/minute

# ============================================
# SECURITY
# ============================================
# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Enable/disable security headers
ENABLE_SECURITY_HEADERS=true

# ============================================
# PRODUCTION DEPLOYMENT
# ============================================
# Number of Gunicorn workers (usually 2*CPU + 1)
WORKERS=4

# App version (set during CI/CD)
APP_VERSION=1.0.0

# ============================================
# CUSTOS ESTIMADOS (referencia)
# ============================================
# gpt-4o-mini: ~$0.00015/1K input, ~$0.0006/1K output
# gpt-4o:      ~$0.005/1K input,   ~$0.015/1K output
# gpt-4-turbo: ~$0.01/1K input,    ~$0.03/1K output
#
# Estimativa por uso:
# - Gerar 3 perguntas: ~$0.01-0.03
# - Dialogo socratico (1 interacao): ~$0.005-0.01
