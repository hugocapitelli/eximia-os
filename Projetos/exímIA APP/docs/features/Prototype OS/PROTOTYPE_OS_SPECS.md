# PROTOTYPE OS - Technical Specifications

> **MÃ³dulo**: Prototype OS (Design & Product)
> **Subfeature**: Technical Specifications & API Design
> **Status**: Specification
> **Ãšltima atualizaÃ§Ã£o**: 2026-01-28

---

## 1. VisÃ£o Geral

O mÃ³dulo de Technical Specifications transforma PRDs e User Stories em especificaÃ§Ãµes tÃ©cnicas detalhadas, incluindo design de APIs, data models, diagramas de arquitetura e contracts. Ã‰ a ponte entre Product e Engineering.

### 1.1 PropÃ³sito

- **API Design**: DefiniÃ§Ã£o de endpoints, schemas, validations
- **Data Modeling**: Entity relationships, database schemas
- **Architecture**: Diagramas de componentes e fluxos
- **Contracts**: Interfaces entre sistemas e mÃ³dulos
- **Non-Functional Requirements**: Performance, security, scalability

### 1.2 Specification Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SPECIFICATION LAYERS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              SYSTEM SPECIFICATION                    â”‚    â”‚
â”‚  â”‚  Overall architecture, tech stack, infrastructure   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              MODULE SPECIFICATION                    â”‚    â”‚
â”‚  â”‚  Component boundaries, interfaces, dependencies     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              FEATURE SPECIFICATION                   â”‚    â”‚
â”‚  â”‚  API endpoints, data models, business logic         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              STORY SPECIFICATION                     â”‚    â”‚
â”‚  â”‚  Implementation details, edge cases, tests          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Specification Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API DESIGN      â”‚  DATA MODELING   â”‚  ARCHITECTURE    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ OpenAPI/Swaggerâ”‚ â€¢ ERD Diagrams   â”‚ â€¢ C4 Diagrams    â”‚
â”‚ â€¢ GraphQL Schema â”‚ â€¢ TypeScript     â”‚ â€¢ Sequence Diag. â”‚
â”‚ â€¢ REST Contracts â”‚   Interfaces     â”‚ â€¢ State Machines â”‚
â”‚ â€¢ Error Handling â”‚ â€¢ Migrations     â”‚ â€¢ Data Flow      â”‚
â”‚ â€¢ Validation     â”‚ â€¢ Indexes        â”‚ â€¢ Dependencies   â”‚
â”‚ â€¢ Authentication â”‚ â€¢ Constraints    â”‚ â€¢ Boundaries     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Wireframes

### 2.1 Specification Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”  PROTOTYPE OS > SPECS > Dashboard Module           ğŸ””  ğŸ‘¤ Hugo        â”‚
â”‚ â”‚ â‰¡ â”‚                                                                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ Specification: Dashboard Module                                   â”‚   â”‚
â”‚  â”‚ Version: 2.1.0  â”‚  Status: [In Review]  â”‚  Last updated: 2 hours agoâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Overview â”‚    API    â”‚   Data    â”‚   Arch    â”‚   NFRs    â”‚  Tests  â”‚   â”‚
â”‚  â”‚  â”â”â”â”â”â”â”  â”‚           â”‚           â”‚           â”‚           â”‚         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“– Description                                                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ O mÃ³dulo Dashboard Ã© responsÃ¡vel por agregar e exibir mÃ©tricas      â”‚   â”‚
â”‚  â”‚ chave do usuÃ¡rio, incluindo tarefas pendentes, metas em progresso,  â”‚   â”‚
â”‚  â”‚ e atividades recentes. Serve como ponto de entrada principal apÃ³s   â”‚   â”‚
â”‚  â”‚ o login.                                                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”— Related Documents             â”‚ ğŸ‘¥ Stakeholders                  â”‚   â”‚
â”‚  â”‚                                   â”‚                                  â”‚   â”‚
â”‚  â”‚ â€¢ PRD-003: Dashboard v2          â”‚ â€¢ JoÃ£o Silva (Tech Lead)        â”‚   â”‚
â”‚  â”‚ â€¢ Epic: Dashboard Analytics      â”‚ â€¢ Maria Santos (Backend)        â”‚   â”‚
â”‚  â”‚ â€¢ Stories: #42, #43, #44, #45   â”‚ â€¢ Pedro Lima (Frontend)         â”‚   â”‚
â”‚  â”‚ â€¢ Wireframes: Dashboard v2.0     â”‚ â€¢ Ana Costa (QA)                â”‚   â”‚
â”‚  â”‚                                   â”‚                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š Specification Summary                                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚  â”‚   8 APIs     â”‚ â”‚  12 Types    â”‚ â”‚  5 Tables    â”‚ â”‚   3 NFRs     â”‚â”‚   â”‚
â”‚  â”‚  â”‚   Defined    â”‚ â”‚   Defined    â”‚ â”‚   Affected   â”‚ â”‚   Defined    â”‚â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Coverage: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  72%                                  â”‚   â”‚
â”‚  â”‚  (Stories with complete specs)                                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âš ï¸ Open Questions (2)                                                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â“ Como lidar com cache invalidation quando goals sÃ£o atualizados?  â”‚   â”‚
â”‚  â”‚    Assignee: @joao  â”‚  Due: Jan 30                                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â“ Rate limiting para o endpoint de metrics - qual threshold?       â”‚   â”‚
â”‚  â”‚    Assignee: @maria  â”‚  Due: Jan 29                                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ âœï¸ Edit Spec ]  [ ğŸ“¤ Export ]  [ ğŸ¤– AI Complete ]  [ âœ… Request Review ] â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 API Design Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Overview â”‚  â”â”APIâ”â”  â”‚   Data    â”‚   Arch    â”‚   NFRs    â”‚  Tests  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŒ API Endpoints                                    [ + Add API ]   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Base URL: /api/v1/dashboard                                         â”‚   â”‚
â”‚  â”‚ Authentication: Bearer Token (JWT)                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¼ GET /metrics                                           [Expand]   â”‚   â”‚
â”‚  â”‚   Description: Retorna mÃ©tricas agregadas do dashboard              â”‚   â”‚
â”‚  â”‚   Status: âœ… Defined  â”‚  Story: #42                                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   ğŸ“¥ Request                                                         â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ Query Parameters:                                            â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ Name     â”‚ Type     â”‚ Required â”‚ Description            â”‚ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ period   â”‚ string   â”‚ No       â”‚ day, week, month, year â”‚ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ from     â”‚ date     â”‚ No       â”‚ Start date (ISO 8601)  â”‚ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â”‚ to       â”‚ date     â”‚ No       â”‚ End date (ISO 8601)    â”‚ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚  â”‚   â”‚                                                              â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ Headers:                                                     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ Authorization: Bearer {token} (required)                   â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â€¢ X-Timezone: America/Sao_Paulo (optional)                   â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   ğŸ“¤ Response (200 OK)                                              â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ {                                                            â”‚   â”‚   â”‚
â”‚  â”‚   â”‚   "data": {                                                  â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     "tasks": {                                               â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "total": 42,                                           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "completed": 35,                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "pending": 7,                                          â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "overdue": 2                                           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     },                                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     "goals": {                                               â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "active": 5,                                           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "completed": 12,                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "avgProgress": 68.5                                    â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     },                                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     "streaks": {                                             â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "current": 14,                                         â”‚   â”‚   â”‚
â”‚  â”‚   â”‚       "longest": 30                                          â”‚   â”‚   â”‚
â”‚  â”‚   â”‚     }                                                        â”‚   â”‚   â”‚
â”‚  â”‚   â”‚   },                                                         â”‚   â”‚   â”‚
â”‚  â”‚   â”‚   "period": "week",                                          â”‚   â”‚   â”‚
â”‚  â”‚   â”‚   "generatedAt": "2026-01-28T10:00:00Z"                     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ }                                                            â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   âš ï¸ Error Responses                                                â”‚   â”‚
â”‚  â”‚   â€¢ 401 Unauthorized - Token invÃ¡lido ou expirado                   â”‚   â”‚
â”‚  â”‚   â€¢ 400 Bad Request - ParÃ¢metros invÃ¡lidos                          â”‚   â”‚
â”‚  â”‚   â€¢ 500 Internal Server Error - Erro ao calcular mÃ©tricas           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¸ GET /activities                                        [Expand]   â”‚   â”‚
â”‚  â”‚   Description: Lista atividades recentes do usuÃ¡rio                 â”‚   â”‚
â”‚  â”‚   Status: ğŸŸ¡ Draft  â”‚  Story: #43                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¸ POST /widgets/reorder                                  [Expand]   â”‚   â”‚
â”‚  â”‚   Description: Reordena widgets do dashboard                        â”‚   â”‚
â”‚  â”‚   Status: âšª Not Started  â”‚  Story: #44                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ ğŸ“„ Export OpenAPI ]  [ ğŸ”— Generate Client ]  [ ğŸ§ª Generate Tests ]      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Data Modeling Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Overview â”‚    API    â”‚  â”Dataâ”â”  â”‚   Arch    â”‚   NFRs    â”‚  Tests  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ View Mode             â”‚                                               â”‚  â”‚
â”‚  â”‚                       â”‚  ğŸ—‚ï¸ Entity Relationship Diagram              â”‚  â”‚
â”‚  â”‚ â—‹ ERD Diagram        â”‚                                               â”‚  â”‚
â”‚  â”‚ â— TypeScript         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â—‹ SQL Schema         â”‚  â”‚                                          â”‚ â”‚  â”‚
â”‚  â”‚ â—‹ Migrations         â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â”‚   User      â”‚      â”‚   Goal      â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â”‚ id          â”‚â”€â”€â”   â”‚ id          â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ Entities              â”‚  â”‚   â”‚ name        â”‚  â”‚   â”‚ user_id     â”‚â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚ â˜‘ User               â”‚  â”‚   â”‚ email       â”‚  â”‚   â”‚ title       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â˜‘ Goal               â”‚  â”‚   â”‚ avatar      â”‚  â””â”€â”€â–¶â”‚ status      â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â˜‘ Task               â”‚  â”‚   â”‚ created_at  â”‚      â”‚ target_date â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â˜‘ Activity           â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ progress    â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ â˜‘ DashboardWidget    â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚          â”‚                     â”‚        â”‚ â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚          â”‚ 1:N                â”‚ 1:N    â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚          â–¼                     â–¼        â”‚ â”‚  â”‚
â”‚  â”‚ Relationships         â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚ User â†’ Goal (1:N)    â”‚  â”‚   â”‚   Task      â”‚      â”‚  KeyResult  â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ User â†’ Task (1:N)    â”‚  â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ Goal â†’ KeyResult (1:N)â”‚  â”‚   â”‚ id          â”‚      â”‚ id          â”‚  â”‚ â”‚  â”‚
â”‚  â”‚ User â†’ Activity (1:N)â”‚  â”‚   â”‚ user_id     â”‚      â”‚ goal_id     â”‚  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â”‚ title       â”‚      â”‚ title       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â”‚ due_date    â”‚      â”‚ current     â”‚  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â”‚ status      â”‚      â”‚ target      â”‚  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚                                          â”‚ â”‚  â”‚
â”‚  â”‚                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ TypeScript Interface: DashboardMetrics                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ interface DashboardMetrics {                                   â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   tasks: {                                                     â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     total: number;                                             â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     completed: number;                                         â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     pending: number;                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     overdue: number;                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   };                                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   goals: {                                                     â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     active: number;                                            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     completed: number;                                         â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     avgProgress: number; // 0-100                              â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   };                                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   streaks: {                                                   â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     current: number;                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     longest: number;                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   };                                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   habits: {                                                    â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     todayCompleted: number;                                    â”‚   â”‚   â”‚
â”‚  â”‚ â”‚     todayTotal: number;                                        â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   };                                                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ }                                                              â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ [ ğŸ“‹ Copy ]  [ ğŸ“ Export to types/  ]  [ ğŸ”„ Sync with API ]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ ğŸ—„ï¸ Generate Migration ]  [ ğŸ“Š Generate Seed Data ]                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Architecture Diagrams Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Overview â”‚    API    â”‚   Data    â”‚  â”Archâ”â”  â”‚   NFRs    â”‚  Tests  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Diagram Type       â”‚                                                 â”‚   â”‚
â”‚  â”‚                    â”‚  ğŸ—ï¸ Component Diagram                          â”‚   â”‚
â”‚  â”‚ â— Component        â”‚                                                 â”‚   â”‚
â”‚  â”‚ â—‹ Sequence         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â—‹ Data Flow        â”‚  â”‚                                          â”‚   â”‚   â”‚
â”‚  â”‚ â—‹ State Machine    â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚ â—‹ C4 Context       â”‚  â”‚    â”‚         FRONTEND                 â”‚   â”‚   â”‚   â”‚
â”‚  â”‚ â—‹ C4 Container     â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚      Dashboard Page         â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚    â”‚  â”‚                             â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚ [ + Add Diagram ]  â”‚  â”‚    â”‚  â”‚  â”‚MetricCard â”‚  â”‚ActivityFeedâ”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â”‚GoalWidgetâ”‚  â”‚TaskWidget â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                       â”‚ REST/JSON        â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                       â–¼                  â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚          BACKEND                 â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚    Dashboard Service        â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚                             â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â€¢ MetricsAggregator        â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â€¢ ActivityLogger           â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â”‚  â€¢ CacheManager             â”‚â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                       â”‚ SQL              â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                       â–¼                  â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚         DATABASE                 â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â”‚  PostgreSQL (Supabase)          â”‚   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â”‚                                          â”‚   â”‚   â”‚
â”‚  â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ Sequence Diagram: Load Dashboard                                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  User        Frontend       DashboardAPI      Cache       Database  â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚â”€â”€navigateâ”€â”€â–¶â”‚               â”‚               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚â”€â”€GET /metricsâ”€â–¶               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚â”€â”€check cacheâ”€â”€â–¶            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚â—€â”€â”€cache missâ”€â”€â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€queryâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€resultsâ”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚â”€â”€store cacheâ”€â”€â–¶            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚â—€â”€â”€metricsâ”€â”€â”€â”€â”‚               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚â—€â”€â”€renderâ”€â”€â”€â”‚               â”‚               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚   â”‚             â”‚               â”‚               â”‚            â”‚       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ ğŸ“¥ Import from Mermaid ]  [ ğŸ“¤ Export SVG ]  [ ğŸ”— Embed Link ]          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 Non-Functional Requirements Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Overview â”‚    API    â”‚   Data    â”‚   Arch    â”‚  â”NFRsâ”â”  â”‚  Tests  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âš¡ PERFORMANCE                                           [ + Add ]   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ NFR-001: Dashboard Load Time                                   â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Requirement:                                                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ O dashboard deve carregar completamente em menos de 2 segundos â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ para 95% dos usuÃ¡rios (P95 < 2s).                              â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Measurement:                                                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Metric: Time to Interactive (TTI)                            â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Tool: Lighthouse, DataDog RUM                                â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Baseline: Current P95 = 3.2s                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Implementation Notes:                                           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Cache metrics com TTL de 5 minutos                           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Lazy load widgets nÃ£o visÃ­veis                               â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Skeleton loading para perceived performance                  â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Priority: ğŸ”´ High  â”‚  Owner: @pedro  â”‚  Story: #42             â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ NFR-002: API Response Time                                     â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Requirement:                                                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Endpoints de mÃ©tricas devem responder em < 500ms (P99).       â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Priority: ğŸŸ¡ Medium  â”‚  Owner: @maria  â”‚  Story: #42           â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”’ SECURITY                                              [ + Add ]   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ NFR-003: Data Access Control                                   â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Requirement:                                                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ UsuÃ¡rios sÃ³ podem ver mÃ©tricas dos seus prÃ³prios dados.       â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Admins podem ver mÃ©tricas agregadas da organizaÃ§Ã£o.           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Implementation:                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ RLS policies no Supabase                                     â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ user_id filter em todas as queries                          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Audit log de acessos                                         â”‚  â”‚   â”‚
â”‚  â”‚ â”‚                                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Priority: ğŸ”´ High  â”‚  Owner: @joao  â”‚  Story: #43              â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ˆ SCALABILITY                                           [ + Add ]   â”‚   â”‚
â”‚  â”‚ â€¢ NFR-004: Support 10,000 concurrent users                          â”‚   â”‚
â”‚  â”‚ â€¢ NFR-005: Horizontal scaling via Vercel Edge Functions             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â™¿ ACCESSIBILITY                                          [ + Add ]   â”‚   â”‚
â”‚  â”‚ â€¢ NFR-006: WCAG 2.1 AA compliance                                   â”‚   â”‚
â”‚  â”‚ â€¢ NFR-007: Screen reader support for all metrics                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 AI Specification Generator

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                      âœ¨ AI Specification Generator                          â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Source Material                                                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â— Generate from PRD                                                 â”‚   â”‚
â”‚  â”‚   [â–¼ PRD-003: Dashboard v2.0                                    ]   â”‚   â”‚
â”‚  â”‚   Sections: [â˜‘ Â§4 Features] [â˜‘ Â§5 Tech] [â˜ Â§6 Timeline]            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â—‹ Generate from User Stories                                        â”‚   â”‚
â”‚  â”‚   [ Select stories... ]                                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â—‹ Generate from Description                                         â”‚   â”‚
â”‚  â”‚   [ Enter description... ]                                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Generation Options                                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ What to generate:                                                    â”‚   â”‚
â”‚  â”‚ â˜‘ API Endpoints (OpenAPI)                                           â”‚   â”‚
â”‚  â”‚ â˜‘ TypeScript Interfaces                                             â”‚   â”‚
â”‚  â”‚ â˜‘ Database Schema (SQL)                                             â”‚   â”‚
â”‚  â”‚ â˜ Architecture Diagrams (Mermaid)                                   â”‚   â”‚
â”‚  â”‚ â˜‘ Non-Functional Requirements                                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Tech Stack Context:                                                  â”‚   â”‚
â”‚  â”‚ [â–¼ Next.js 16 + TypeScript + Supabase (Default)              ]      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚                     [ âœ¨ Generate Specification ]                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ Generated Specification Preview                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ ## API Endpoints                                               â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ### GET /api/v1/dashboard/metrics                             â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Retorna mÃ©tricas agregadas do dashboard do usuÃ¡rio.           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ **Query Parameters:**                                          â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ | Name   | Type   | Required | Description              |     â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ |--------|--------|----------|--------------------------|     â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ | period | string | No       | day, week, month, year   |     â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ **Response (200):**                                            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ```typescript                                                  â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ interface DashboardMetricsResponse {                           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   data: DashboardMetrics;                                      â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   period: Period;                                              â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   generatedAt: string; // ISO 8601                            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ }                                                              â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ```                                                            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ---                                                            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ## TypeScript Interfaces                                       â”‚   â”‚   â”‚
â”‚  â”‚ â”‚                                                                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ```typescript                                                  â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ interface DashboardMetrics {                                   â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   tasks: TaskMetrics;                                          â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   goals: GoalMetrics;                                          â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   ...                                                          â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ¤– AI Confidence: 87%                                               â”‚   â”‚
â”‚  â”‚ âš ï¸ Needs Review: 3 items marked for human verification              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ ğŸ”„ Regenerate ]  [ âœï¸ Edit ]  [ âœ… Accept & Create Spec ]              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. TypeScript Interfaces

```typescript
// =============================================================================
// TECHNICAL SPECIFICATIONS - TYPE DEFINITIONS
// =============================================================================

// -----------------------------------------------------------------------------
// Core Enums
// -----------------------------------------------------------------------------

export type SpecificationType =
  | 'system'
  | 'module'
  | 'feature'
  | 'story';

export type SpecificationStatus =
  | 'draft'
  | 'in_review'
  | 'approved'
  | 'deprecated';

export type DiagramType =
  | 'component'
  | 'sequence'
  | 'data_flow'
  | 'state_machine'
  | 'c4_context'
  | 'c4_container'
  | 'c4_component'
  | 'erd';

export type NFRCategory =
  | 'performance'
  | 'security'
  | 'scalability'
  | 'availability'
  | 'accessibility'
  | 'maintainability';

// -----------------------------------------------------------------------------
// Specification Document
// -----------------------------------------------------------------------------

export interface TechnicalSpecification {
  id: string;
  projectId: string;

  // Metadata
  name: string;
  type: SpecificationType;
  version: string;
  status: SpecificationStatus;

  // Content
  description: string;
  scope: string;

  // Sections
  apiSpec?: APISpecification;
  dataModels: DataModel[];
  diagrams: Diagram[];
  nfrs: NonFunctionalRequirement[];
  testCriteria: TestCriterion[];

  // Links
  linkedPRD?: string;
  linkedEpic?: string;
  linkedStories: string[];
  linkedWireframes: string[];

  // Open Questions
  openQuestions: OpenQuestion[];

  // Stakeholders
  owner: string;
  reviewers: string[];
  contributors: string[];

  // History
  versions: SpecVersion[];

  // Metadata
  createdAt: Date;
  updatedAt: Date;
  createdBy: string;
  approvedAt?: Date;
  approvedBy?: string;
}

export interface SpecVersion {
  id: string;
  version: string;
  changelog: string;
  snapshot: string; // JSON
  createdAt: Date;
  createdBy: string;
}

export interface OpenQuestion {
  id: string;
  question: string;
  context?: string;
  assignee?: string;
  dueDate?: Date;
  resolved: boolean;
  resolution?: string;
  resolvedAt?: Date;
  resolvedBy?: string;
  createdAt: Date;
}

// -----------------------------------------------------------------------------
// API Specification
// -----------------------------------------------------------------------------

export interface APISpecification {
  id: string;
  specificationId: string;

  // Info
  title: string;
  version: string;
  baseUrl: string;
  description?: string;

  // Authentication
  authentication: AuthenticationConfig;

  // Endpoints
  endpoints: APIEndpoint[];

  // Common responses
  commonResponses: CommonResponse[];

  // OpenAPI export
  openApiVersion: '3.0' | '3.1';
}

export interface AuthenticationConfig {
  type: 'bearer' | 'api_key' | 'oauth2' | 'none';
  scheme?: string;
  headerName?: string;
  description?: string;
}

export interface APIEndpoint {
  id: string;
  apiSpecId: string;

  // Route
  method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';
  path: string;

  // Metadata
  operationId: string;
  summary: string;
  description?: string;
  tags: string[];

  // Status
  status: 'draft' | 'defined' | 'implemented' | 'deprecated';
  linkedStoryId?: string;

  // Parameters
  pathParams: Parameter[];
  queryParams: Parameter[];
  headerParams: Parameter[];

  // Body
  requestBody?: RequestBody;

  // Responses
  responses: APIResponse[];

  // Security
  requiresAuth: boolean;
  scopes?: string[];

  // Rate limiting
  rateLimit?: RateLimitConfig;

  createdAt: Date;
  updatedAt: Date;
}

export interface Parameter {
  name: string;
  type: 'string' | 'number' | 'boolean' | 'array' | 'object';
  required: boolean;
  description?: string;
  example?: any;
  enum?: string[];
  default?: any;
  format?: string; // date, date-time, email, uri, uuid
}

export interface RequestBody {
  contentType: 'application/json' | 'multipart/form-data' | 'application/x-www-form-urlencoded';
  required: boolean;
  description?: string;
  schema: SchemaDefinition;
  example?: any;
}

export interface APIResponse {
  statusCode: number;
  description: string;
  contentType?: string;
  schema?: SchemaDefinition;
  example?: any;
  headers?: Header[];
}

export interface SchemaDefinition {
  type: 'object' | 'array' | 'string' | 'number' | 'boolean' | 'null';
  properties?: Record<string, PropertyDefinition>;
  items?: SchemaDefinition;
  required?: string[];
  $ref?: string; // Reference to data model
}

export interface PropertyDefinition {
  type: string;
  description?: string;
  format?: string;
  nullable?: boolean;
  enum?: any[];
  default?: any;
  example?: any;
  minimum?: number;
  maximum?: number;
  minLength?: number;
  maxLength?: number;
  pattern?: string;
}

export interface Header {
  name: string;
  type: string;
  description?: string;
  required: boolean;
}

export interface CommonResponse {
  statusCode: number;
  name: string;
  description: string;
  schema?: SchemaDefinition;
}

export interface RateLimitConfig {
  requests: number;
  period: 'second' | 'minute' | 'hour' | 'day';
  scope: 'user' | 'ip' | 'global';
}

// -----------------------------------------------------------------------------
// Data Models
// -----------------------------------------------------------------------------

export interface DataModel {
  id: string;
  specificationId: string;

  // Info
  name: string;
  description?: string;
  type: 'entity' | 'dto' | 'enum' | 'interface';

  // Definition
  properties: ModelProperty[];

  // Relationships
  relationships: ModelRelationship[];

  // Database mapping
  tableName?: string;
  indexes?: DatabaseIndex[];

  // TypeScript
  typeScriptInterface?: string;

  // SQL
  sqlSchema?: string;
  migrationScript?: string;

  createdAt: Date;
  updatedAt: Date;
}

export interface ModelProperty {
  name: string;
  type: string;
  nullable: boolean;
  description?: string;

  // Database
  columnName?: string;
  columnType?: string;
  isPrimaryKey?: boolean;
  isUnique?: boolean;
  defaultValue?: any;

  // Validation
  validation?: ValidationRule[];

  // TypeScript
  tsType?: string;
}

export interface ValidationRule {
  type: 'required' | 'min' | 'max' | 'pattern' | 'email' | 'url' | 'uuid' | 'custom';
  value?: any;
  message?: string;
}

export interface ModelRelationship {
  type: 'one_to_one' | 'one_to_many' | 'many_to_one' | 'many_to_many';
  targetModel: string;
  foreignKey?: string;
  inverseForeignKey?: string;
  joinTable?: string;
  onDelete?: 'CASCADE' | 'SET_NULL' | 'RESTRICT' | 'NO_ACTION';
  onUpdate?: 'CASCADE' | 'SET_NULL' | 'RESTRICT' | 'NO_ACTION';
}

export interface DatabaseIndex {
  name: string;
  columns: string[];
  type: 'btree' | 'hash' | 'gin' | 'gist';
  unique: boolean;
  partial?: string; // WHERE clause
}

// -----------------------------------------------------------------------------
// Diagrams
// -----------------------------------------------------------------------------

export interface Diagram {
  id: string;
  specificationId: string;

  // Info
  name: string;
  type: DiagramType;
  description?: string;

  // Content
  source: string; // Mermaid, PlantUML, or custom DSL
  format: 'mermaid' | 'plantuml' | 'custom';

  // Rendered
  svgUrl?: string;
  pngUrl?: string;

  // Links
  linkedComponents: string[];

  createdAt: Date;
  updatedAt: Date;
}

// -----------------------------------------------------------------------------
// Non-Functional Requirements
// -----------------------------------------------------------------------------

export interface NonFunctionalRequirement {
  id: string;
  specificationId: string;

  // Info
  code: string; // NFR-001
  title: string;
  category: NFRCategory;
  priority: 'high' | 'medium' | 'low';

  // Requirement
  description: string;
  rationale?: string;
  acceptanceCriteria: string;

  // Measurement
  metric?: string;
  baseline?: string;
  target: string;
  measurement: string; // How to measure

  // Implementation
  implementationNotes?: string;
  estimatedEffort?: string;

  // Links
  linkedStoryId?: string;
  owner?: string;

  // Status
  status: 'draft' | 'approved' | 'implemented' | 'verified';

  createdAt: Date;
  updatedAt: Date;
}

// -----------------------------------------------------------------------------
// Test Criteria
// -----------------------------------------------------------------------------

export interface TestCriterion {
  id: string;
  specificationId: string;

  // Info
  name: string;
  type: 'unit' | 'integration' | 'e2e' | 'performance' | 'security';

  // Test definition
  scenario: string;
  givenPreconditions: string[];
  whenActions: string[];
  thenExpectations: string[];

  // Links
  linkedEndpointId?: string;
  linkedNFRId?: string;
  linkedStoryId?: string;

  // Status
  status: 'draft' | 'automated' | 'manual';

  createdAt: Date;
  updatedAt: Date;
}

// -----------------------------------------------------------------------------
// Generation
// -----------------------------------------------------------------------------

export interface SpecGenerationRequest {
  projectId: string;

  // Source
  source: 'prd' | 'stories' | 'description';
  prdId?: string;
  prdSections?: string[];
  storyIds?: string[];
  description?: string;

  // Options
  generateAPI: boolean;
  generateDataModels: boolean;
  generateDiagrams: boolean;
  generateNFRs: boolean;

  // Context
  techStack: TechStackContext;
}

export interface TechStackContext {
  frontend: string;
  backend: string;
  database: string;
  hosting: string;
  additionalContext?: string;
}

export interface SpecGenerationResult {
  apiSpec?: Partial<APISpecification>;
  dataModels: Partial<DataModel>[];
  diagrams: Partial<Diagram>[];
  nfrs: Partial<NonFunctionalRequirement>[];
  confidence: number;
  reviewItems: ReviewItem[];
}

export interface ReviewItem {
  section: string;
  field: string;
  issue: string;
  suggestion?: string;
}

// -----------------------------------------------------------------------------
// Export
// -----------------------------------------------------------------------------

export interface SpecExportOptions {
  format: 'markdown' | 'html' | 'pdf' | 'openapi' | 'typescript';
  sections: ('api' | 'data' | 'diagrams' | 'nfrs' | 'tests')[];
  includeMetadata: boolean;
}
```

---

## 4. Connection Layer Events

```typescript
// =============================================================================
// TECHNICAL SPECIFICATIONS - EVENT BUS INTEGRATION
// =============================================================================

import { EventEmitter } from '@eximia/event-bus';

// -----------------------------------------------------------------------------
// Event Types
// -----------------------------------------------------------------------------

export interface SpecificationEvents {
  // Specification Lifecycle
  'specs:specification:created': {
    specId: string;
    projectId: string;
    name: string;
    type: SpecificationType;
    createdBy: string;
  };

  'specs:specification:updated': {
    specId: string;
    projectId: string;
    sections: string[]; // Which sections were updated
    updatedBy: string;
  };

  'specs:specification:status_changed': {
    specId: string;
    fromStatus: SpecificationStatus;
    toStatus: SpecificationStatus;
    changedBy: string;
  };

  'specs:specification:approved': {
    specId: string;
    projectId: string;
    approvedBy: string;
    version: string;
  };

  // API Spec Events
  'specs:api:endpoint_added': {
    specId: string;
    endpointId: string;
    method: string;
    path: string;
    linkedStoryId?: string;
  };

  'specs:api:endpoint_implemented': {
    specId: string;
    endpointId: string;
    implementedBy: string;
  };

  'specs:api:openapi_exported': {
    specId: string;
    format: string;
    exportedBy: string;
  };

  // Data Model Events
  'specs:data:model_created': {
    specId: string;
    modelId: string;
    modelName: string;
  };

  'specs:data:migration_generated': {
    specId: string;
    modelId: string;
    migrationName: string;
  };

  // NFR Events
  'specs:nfr:created': {
    specId: string;
    nfrId: string;
    code: string;
    category: NFRCategory;
  };

  'specs:nfr:verified': {
    specId: string;
    nfrId: string;
    result: 'pass' | 'fail';
    metrics: Record<string, any>;
  };

  // Question Events
  'specs:question:created': {
    specId: string;
    questionId: string;
    assignee?: string;
  };

  'specs:question:resolved': {
    specId: string;
    questionId: string;
    resolution: string;
    resolvedBy: string;
  };

  // AI Events
  'specs:ai:spec_generated': {
    specId: string;
    projectId: string;
    source: string;
    confidence: number;
    sectionsGenerated: string[];
  };
}

// -----------------------------------------------------------------------------
// Event Handlers
// -----------------------------------------------------------------------------

export class SpecificationEventHandler {
  constructor(private eventBus: EventEmitter) {
    this.registerHandlers();
  }

  private registerHandlers(): void {
    // When spec is approved, notify dev team
    this.eventBus.on('specs:specification:approved', async (event) => {
      this.eventBus.emit('notification:send', {
        type: 'approval',
        title: 'Spec Aprovada',
        message: `A especificaÃ§Ã£o tÃ©cnica foi aprovada e estÃ¡ pronta para implementaÃ§Ã£o`,
        recipients: ['dev_team'],
      });

      // Create handoff package
      this.eventBus.emit('handoff:package:create', {
        specId: event.specId,
        triggeredBy: event.approvedBy,
      });
    });

    // When endpoint is added, link to story
    this.eventBus.on('specs:api:endpoint_added', async (event) => {
      if (event.linkedStoryId) {
        this.eventBus.emit('backlog:story:updated', {
          storyId: event.linkedStoryId,
          changes: {
            technicalSpec: event.endpointId,
          },
        });
      }
    });

    // When NFR is verified, update story
    this.eventBus.on('specs:nfr:verified', async (event) => {
      this.eventBus.emit('analytics:track', {
        event: 'nfr_verification',
        properties: {
          specId: event.specId,
          nfrId: event.nfrId,
          result: event.result,
        },
      });
    });
  }
}

// -----------------------------------------------------------------------------
// Cross-Module Subscriptions
// -----------------------------------------------------------------------------

export const specificationSubscriptions = {
  // When PRD is approved, suggest creating tech spec
  'prototypos:prd:approved': async (event: any, eventBus: EventEmitter) => {
    eventBus.emit('notification:send', {
      type: 'action_required',
      title: 'PRD Aprovado',
      message: 'Deseja gerar a especificaÃ§Ã£o tÃ©cnica automaticamente?',
      action: {
        type: 'generate_spec',
        data: { prdId: event.prdId },
      },
      recipients: ['tech_lead'],
    });
  },

  // When story is ready, check if spec exists
  'backlog:story:status_changed': async (event: any, eventBus: EventEmitter) => {
    if (event.toStatus === 'ready') {
      // Check if story has technical spec
      // If not, suggest creating one
    }
  },

  // When wireframe is approved, extract technical requirements
  'wireframe:document:status_changed': async (event: any, eventBus: EventEmitter) => {
    if (event.toStatus === 'approved') {
      // Extract data models from wireframes
      // Suggest API endpoints based on UI interactions
    }
  },
};
```

---

## 5. Database Schema

```sql
-- =============================================================================
-- TECHNICAL SPECIFICATIONS - DATABASE SCHEMA
-- =============================================================================

-- -----------------------------------------------------------------------------
-- Specifications
-- -----------------------------------------------------------------------------

CREATE TABLE technical_specifications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES product_projects(id) ON DELETE CASCADE,

    -- Metadata
    name VARCHAR(200) NOT NULL,
    type VARCHAR(20) NOT NULL DEFAULT 'feature',
    version VARCHAR(20) NOT NULL DEFAULT '1.0.0',
    status VARCHAR(20) NOT NULL DEFAULT 'draft',

    -- Content
    description TEXT,
    scope TEXT,

    -- Links
    linked_prd_id UUID REFERENCES prds(id),
    linked_epic_id UUID REFERENCES backlog_epics(id),

    -- Ownership
    owner_id UUID NOT NULL REFERENCES auth.users(id),
    approved_at TIMESTAMPTZ,
    approved_by UUID REFERENCES auth.users(id),

    created_by UUID NOT NULL REFERENCES auth.users(id),
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE specification_stories (
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,
    story_id UUID NOT NULL REFERENCES backlog_stories(id) ON DELETE CASCADE,
    PRIMARY KEY (specification_id, story_id)
);

CREATE TABLE specification_wireframes (
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,
    wireframe_id UUID NOT NULL REFERENCES wireframe_documents(id) ON DELETE CASCADE,
    PRIMARY KEY (specification_id, wireframe_id)
);

CREATE TABLE specification_reviewers (
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    PRIMARY KEY (specification_id, user_id)
);

CREATE TABLE specification_contributors (
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    PRIMARY KEY (specification_id, user_id)
);

CREATE TABLE specification_versions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    version VARCHAR(20) NOT NULL,
    changelog TEXT,
    snapshot JSONB NOT NULL,

    created_by UUID NOT NULL REFERENCES auth.users(id),
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- -----------------------------------------------------------------------------
-- Open Questions
-- -----------------------------------------------------------------------------

CREATE TABLE specification_questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    question TEXT NOT NULL,
    context TEXT,

    assignee_id UUID REFERENCES auth.users(id),
    due_date DATE,

    resolved BOOLEAN DEFAULT FALSE,
    resolution TEXT,
    resolved_at TIMESTAMPTZ,
    resolved_by UUID REFERENCES auth.users(id),

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- -----------------------------------------------------------------------------
-- API Specifications
-- -----------------------------------------------------------------------------

CREATE TABLE api_specifications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    title VARCHAR(200) NOT NULL,
    version VARCHAR(20) NOT NULL DEFAULT '1.0.0',
    base_url VARCHAR(500) NOT NULL,
    description TEXT,

    -- Authentication
    auth_type VARCHAR(20) DEFAULT 'bearer',
    auth_scheme VARCHAR(50),
    auth_header_name VARCHAR(100),
    auth_description TEXT,

    openapi_version VARCHAR(5) DEFAULT '3.0',

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE api_common_responses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    api_spec_id UUID NOT NULL REFERENCES api_specifications(id) ON DELETE CASCADE,

    status_code INTEGER NOT NULL,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    schema JSONB,

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE api_endpoints (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    api_spec_id UUID NOT NULL REFERENCES api_specifications(id) ON DELETE CASCADE,

    -- Route
    method VARCHAR(10) NOT NULL,
    path VARCHAR(500) NOT NULL,

    -- Metadata
    operation_id VARCHAR(100) NOT NULL,
    summary VARCHAR(500) NOT NULL,
    description TEXT,
    tags TEXT[] DEFAULT '{}',

    -- Status
    status VARCHAR(20) NOT NULL DEFAULT 'draft',
    linked_story_id UUID REFERENCES backlog_stories(id),

    -- Security
    requires_auth BOOLEAN DEFAULT TRUE,
    scopes TEXT[] DEFAULT '{}',

    -- Rate limiting
    rate_limit_requests INTEGER,
    rate_limit_period VARCHAR(20),
    rate_limit_scope VARCHAR(20),

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),

    UNIQUE (api_spec_id, method, path)
);

CREATE TABLE api_parameters (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    endpoint_id UUID NOT NULL REFERENCES api_endpoints(id) ON DELETE CASCADE,

    location VARCHAR(10) NOT NULL, -- path, query, header
    name VARCHAR(100) NOT NULL,
    type VARCHAR(20) NOT NULL,
    required BOOLEAN DEFAULT FALSE,
    description TEXT,
    example TEXT,
    enum_values TEXT[],
    default_value TEXT,
    format VARCHAR(50),

    "order" INTEGER NOT NULL DEFAULT 0,

    UNIQUE (endpoint_id, location, name)
);

CREATE TABLE api_request_bodies (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    endpoint_id UUID NOT NULL REFERENCES api_endpoints(id) ON DELETE CASCADE,

    content_type VARCHAR(100) NOT NULL DEFAULT 'application/json',
    required BOOLEAN DEFAULT TRUE,
    description TEXT,
    schema JSONB NOT NULL,
    example JSONB,

    UNIQUE (endpoint_id)
);

CREATE TABLE api_responses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    endpoint_id UUID NOT NULL REFERENCES api_endpoints(id) ON DELETE CASCADE,

    status_code INTEGER NOT NULL,
    description TEXT NOT NULL,
    content_type VARCHAR(100) DEFAULT 'application/json',
    schema JSONB,
    example JSONB,

    UNIQUE (endpoint_id, status_code)
);

CREATE TABLE api_response_headers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    response_id UUID NOT NULL REFERENCES api_responses(id) ON DELETE CASCADE,

    name VARCHAR(100) NOT NULL,
    type VARCHAR(20) NOT NULL,
    description TEXT,
    required BOOLEAN DEFAULT FALSE
);

-- -----------------------------------------------------------------------------
-- Data Models
-- -----------------------------------------------------------------------------

CREATE TABLE data_models (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    name VARCHAR(100) NOT NULL,
    description TEXT,
    type VARCHAR(20) NOT NULL DEFAULT 'entity',

    -- Database mapping
    table_name VARCHAR(100),

    -- Generated code
    typescript_interface TEXT,
    sql_schema TEXT,
    migration_script TEXT,

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),

    UNIQUE (specification_id, name)
);

CREATE TABLE data_model_properties (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    model_id UUID NOT NULL REFERENCES data_models(id) ON DELETE CASCADE,

    name VARCHAR(100) NOT NULL,
    type VARCHAR(50) NOT NULL,
    nullable BOOLEAN DEFAULT FALSE,
    description TEXT,

    -- Database
    column_name VARCHAR(100),
    column_type VARCHAR(50),
    is_primary_key BOOLEAN DEFAULT FALSE,
    is_unique BOOLEAN DEFAULT FALSE,
    default_value TEXT,

    -- TypeScript
    ts_type VARCHAR(100),

    "order" INTEGER NOT NULL DEFAULT 0,

    UNIQUE (model_id, name)
);

CREATE TABLE data_model_validations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    property_id UUID NOT NULL REFERENCES data_model_properties(id) ON DELETE CASCADE,

    type VARCHAR(20) NOT NULL,
    value TEXT,
    message TEXT
);

CREATE TABLE data_model_relationships (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    model_id UUID NOT NULL REFERENCES data_models(id) ON DELETE CASCADE,

    type VARCHAR(20) NOT NULL,
    target_model_id UUID NOT NULL REFERENCES data_models(id),
    foreign_key VARCHAR(100),
    inverse_foreign_key VARCHAR(100),
    join_table VARCHAR(100),
    on_delete VARCHAR(20) DEFAULT 'CASCADE',
    on_update VARCHAR(20) DEFAULT 'CASCADE'
);

CREATE TABLE data_model_indexes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    model_id UUID NOT NULL REFERENCES data_models(id) ON DELETE CASCADE,

    name VARCHAR(100) NOT NULL,
    columns TEXT[] NOT NULL,
    type VARCHAR(20) DEFAULT 'btree',
    is_unique BOOLEAN DEFAULT FALSE,
    partial_condition TEXT
);

-- -----------------------------------------------------------------------------
-- Diagrams
-- -----------------------------------------------------------------------------

CREATE TABLE specification_diagrams (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    name VARCHAR(200) NOT NULL,
    type VARCHAR(30) NOT NULL,
    description TEXT,

    source TEXT NOT NULL,
    format VARCHAR(20) NOT NULL DEFAULT 'mermaid',

    svg_url TEXT,
    png_url TEXT,

    linked_components TEXT[] DEFAULT '{}',

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- -----------------------------------------------------------------------------
-- Non-Functional Requirements
-- -----------------------------------------------------------------------------

CREATE TABLE specification_nfrs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    code VARCHAR(20) NOT NULL,
    title VARCHAR(200) NOT NULL,
    category VARCHAR(30) NOT NULL,
    priority VARCHAR(10) NOT NULL DEFAULT 'medium',

    description TEXT NOT NULL,
    rationale TEXT,
    acceptance_criteria TEXT NOT NULL,

    -- Measurement
    metric VARCHAR(100),
    baseline VARCHAR(100),
    target VARCHAR(100) NOT NULL,
    measurement TEXT NOT NULL,

    -- Implementation
    implementation_notes TEXT,
    estimated_effort VARCHAR(50),

    -- Links
    linked_story_id UUID REFERENCES backlog_stories(id),
    owner_id UUID REFERENCES auth.users(id),

    status VARCHAR(20) NOT NULL DEFAULT 'draft',

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),

    UNIQUE (specification_id, code)
);

-- -----------------------------------------------------------------------------
-- Test Criteria
-- -----------------------------------------------------------------------------

CREATE TABLE specification_tests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    specification_id UUID NOT NULL REFERENCES technical_specifications(id) ON DELETE CASCADE,

    name VARCHAR(200) NOT NULL,
    type VARCHAR(20) NOT NULL DEFAULT 'integration',

    scenario TEXT NOT NULL,
    given_preconditions TEXT[] NOT NULL,
    when_actions TEXT[] NOT NULL,
    then_expectations TEXT[] NOT NULL,

    -- Links
    linked_endpoint_id UUID REFERENCES api_endpoints(id),
    linked_nfr_id UUID REFERENCES specification_nfrs(id),
    linked_story_id UUID REFERENCES backlog_stories(id),

    status VARCHAR(20) NOT NULL DEFAULT 'draft',

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- -----------------------------------------------------------------------------
-- Indexes
-- -----------------------------------------------------------------------------

CREATE INDEX idx_specs_project ON technical_specifications(project_id);
CREATE INDEX idx_specs_status ON technical_specifications(status);
CREATE INDEX idx_specs_type ON technical_specifications(type);

CREATE INDEX idx_api_specs_specification ON api_specifications(specification_id);
CREATE INDEX idx_endpoints_api_spec ON api_endpoints(api_spec_id);
CREATE INDEX idx_endpoints_status ON api_endpoints(status);

CREATE INDEX idx_data_models_specification ON data_models(specification_id);
CREATE INDEX idx_diagrams_specification ON specification_diagrams(specification_id);
CREATE INDEX idx_nfrs_specification ON specification_nfrs(specification_id);
CREATE INDEX idx_tests_specification ON specification_tests(specification_id);

-- Full-text search on specs
CREATE INDEX idx_specs_search ON technical_specifications
    USING gin(to_tsvector('portuguese', name || ' ' || COALESCE(description, '')));

-- -----------------------------------------------------------------------------
-- Triggers
-- -----------------------------------------------------------------------------

CREATE TRIGGER update_technical_specifications_timestamp
    BEFORE UPDATE ON technical_specifications
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();

CREATE TRIGGER update_api_specifications_timestamp
    BEFORE UPDATE ON api_specifications
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();

CREATE TRIGGER update_api_endpoints_timestamp
    BEFORE UPDATE ON api_endpoints
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();

CREATE TRIGGER update_data_models_timestamp
    BEFORE UPDATE ON data_models
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();

-- -----------------------------------------------------------------------------
-- RLS Policies
-- -----------------------------------------------------------------------------

ALTER TABLE technical_specifications ENABLE ROW LEVEL SECURITY;
ALTER TABLE api_specifications ENABLE ROW LEVEL SECURITY;
ALTER TABLE api_endpoints ENABLE ROW LEVEL SECURITY;
ALTER TABLE data_models ENABLE ROW LEVEL SECURITY;

-- Specifications: Project members can read, contributors can write
CREATE POLICY specs_read_policy ON technical_specifications
    FOR SELECT USING (
        project_id IN (
            SELECT project_id FROM product_project_members
            WHERE user_id = auth.uid()
        )
    );

CREATE POLICY specs_write_policy ON technical_specifications
    FOR ALL USING (
        owner_id = auth.uid() OR
        id IN (
            SELECT specification_id FROM specification_contributors
            WHERE user_id = auth.uid()
        )
    );
```

---

## 6. AI Features

### 6.1 Specification Generator Agent

```typescript
interface SpecGeneratorAgent {
  name: 'spec_generator';

  capabilities: [
    'generate_from_prd',
    'generate_from_stories',
    'extract_api_endpoints',
    'generate_data_models',
    'suggest_nfrs'
  ];

  prompts: {
    generateFromPRD: `
      VocÃª Ã© um Arquiteto de Software experiente criando especificaÃ§Ãµes tÃ©cnicas.

      PRD CONTENT:
      {{prdContent}}

      TECH STACK:
      {{techStack}}

      Gere uma especificaÃ§Ã£o tÃ©cnica completa incluindo:

      1. API ENDPOINTS:
         Para cada feature, identifique:
         - HTTP Method e Path
         - Query/Path parameters
         - Request body schema
         - Response schemas (success e error)
         - Authentication requirements

      2. DATA MODELS:
         - Entidades necessÃ¡rias
         - Propriedades com tipos
         - Relacionamentos
         - Indexes sugeridos
         - Migrations

      3. NON-FUNCTIONAL REQUIREMENTS:
         - Performance targets
         - Security requirements
         - Scalability considerations

      Use convenÃ§Ãµes RESTful e siga o padrÃ£o do tech stack informado.
    `;

    extractAPIFromWireframe: `
      Analise este wireframe e extraia os endpoints de API necessÃ¡rios:

      WIREFRAME COMPONENTS:
      {{components}}

      INTERACTIONS:
      {{interactions}}

      Para cada interaÃ§Ã£o que requer dados:
      1. Identifique o endpoint necessÃ¡rio
      2. Defina o mÃ©todo HTTP apropriado
      3. Especifique os parÃ¢metros
      4. Defina o schema de response

      Retorne em formato OpenAPI.
    `;
  };
}
```

### 6.2 OpenAPI Generator

```typescript
interface OpenAPIGenerator {
  name: 'openapi_generator';

  generateOpenAPISpec: (apiSpec: APISpecification): string => {
    const spec = {
      openapi: apiSpec.openApiVersion,
      info: {
        title: apiSpec.title,
        version: apiSpec.version,
        description: apiSpec.description,
      },
      servers: [{ url: apiSpec.baseUrl }],
      security: generateSecuritySchemes(apiSpec.authentication),
      paths: generatePaths(apiSpec.endpoints),
      components: {
        schemas: generateSchemas(apiSpec),
        responses: generateCommonResponses(apiSpec.commonResponses),
      },
    };

    return yaml.stringify(spec);
  };

  generateTypeScriptClient: (apiSpec: APISpecification): string => {
    // Generate fetch-based TypeScript client
  };
}
```

### 6.3 Schema Validator

```typescript
interface SchemaValidator {
  name: 'schema_validator';

  validateAPISpec: (spec: APISpecification): ValidationResult => {
    const issues: ValidationIssue[] = [];

    // Check for missing error responses
    for (const endpoint of spec.endpoints) {
      if (!endpoint.responses.some(r => r.statusCode >= 400)) {
        issues.push({
          severity: 'warning',
          path: `endpoints.${endpoint.operationId}.responses`,
          message: 'Missing error response definitions',
        });
      }
    }

    // Check for authentication on sensitive endpoints
    // Check for rate limiting on public endpoints
    // Validate schema references

    return { valid: issues.length === 0, issues };
  };

  validateDataModel: (model: DataModel): ValidationResult => {
    // Check for missing indexes on foreign keys
    // Validate relationship consistency
    // Check naming conventions
  };
}
```

---

## 7. Implementation Roadmap

### Phase 1: Core Specification (Semanas 1-2)

- [ ] Schema do banco de dados
- [ ] CRUD de especificaÃ§Ãµes
- [ ] Versionamento de specs
- [ ] Open questions management
- [ ] Basic specification viewer

### Phase 2: API Design (Semanas 3-4)

- [ ] API endpoint editor
- [ ] Parameter definition
- [ ] Request/Response schemas
- [ ] OpenAPI export
- [ ] API preview mode

### Phase 3: Data Modeling (Semanas 5-6)

- [ ] Data model editor
- [ ] ERD diagram generation
- [ ] TypeScript interface generation
- [ ] SQL schema generation
- [ ] Migration script generation

### Phase 4: Architecture Diagrams (Semanas 7-8)

- [ ] Mermaid diagram editor
- [ ] Component diagrams
- [ ] Sequence diagrams
- [ ] Diagram rendering
- [ ] Export to SVG/PNG

### Phase 5: NFRs & Tests (Semanas 9-10)

- [ ] NFR editor
- [ ] NFR categories and templates
- [ ] Test criteria definition
- [ ] Test case generation
- [ ] NFR verification tracking

### Phase 6: AI Features (Semanas 11-12)

- [ ] Spec generation from PRD
- [ ] API extraction from wireframes
- [ ] Data model suggestions
- [ ] NFR recommendations
- [ ] Schema validation

---

## 8. ReferÃªncias

- [OpenAPI Specification](https://swagger.io/specification/)
- [C4 Model](https://c4model.com/)
- [Mermaid Diagrams](https://mermaid.js.org/)
- [PlantUML](https://plantuml.com/)
- [TypeSpec](https://typespec.io/) - API-first development
- [Zod](https://zod.dev/) - TypeScript schema validation
